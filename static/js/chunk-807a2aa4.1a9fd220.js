(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-807a2aa4"],{"94f5":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[a.totalTime>0?e("el-card",{staticStyle:{margin:"10px 0"}},[e("span",[a._v(a._s(a.playData.name+"\t"+a.playData.broadcast_date))]),e("el-slider",{attrs:{max:this.audio&&this.audio.duration&&parseInt(this.audio.duration)},on:{change:a.changeTime},model:{value:a.timeNow,callback:function(t){a.timeNow=t},expression:"timeNow"}}),e("el-row",[e("el-col",{attrs:{span:20}},[e("span",[a._v(a._s(a._f("formTime")(parseInt(a.timeNow))))])]),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e("span",[a._v(a._s(a._f("formTime")(parseInt(a.totalTime))))])])],1),e("el-row",{staticStyle:{"margin-top":"5px"}},[e("el-col",[e("el-button",{on:{click:a.tui}},[a._v("快退")]),e("el-button",{on:{click:a.curt}},[a._v(a._s(a.isPaused?"开始":"暂停"))]),e("el-button",{on:{click:a.kuai}},[a._v("快进")])],1)],1)],1):a._e(),e("el-card",{staticStyle:{"margin-bottom":"10px"}},[e("el-form",{attrs:{model:a.formData}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"频道："}},[e("el-select",{on:{change:function(t){return a.loadType()}},model:{value:a.formData.channeName,callback:function(t){a.$set(a.formData,"channeName",t)},expression:"formData.channeName"}},a._l(a.channeList,(function(a){return e("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"节目名称："}},[e("el-select",{on:{change:function(t){return a.loadData()}},model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}},a._l(a.optionsList,(function(a){return e("el-option",{key:a.channelId,attrs:{label:a.programName,value:a.channelId}})})),1)],1)],1)],1)],1)],1),e("el-card",[e("el-table",{attrs:{data:a.dataList}},[e("el-table-column",{attrs:{align:"center",prop:"channel_name",label:"频道"}}),e("el-table-column",{attrs:{align:"center",prop:"name",label:"节目名称"}}),e("el-table-column",{attrs:{align:"center",prop:"broadcast_date",label:"日期"}}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"success"},on:{click:function(e){return a.play(t.row)}}},[a._v("播放")])]}}])})],1),e("page",{attrs:{pagination:a.pagination},on:{refresh:a.loadData}})],1)],1)},i=[],o=(e("b0c0"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("c740"),e("99af"),e("bc3a"),function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"page"},[a.pagination.total>0?e("el-pagination",{staticStyle:{"text-align":"right"},attrs:{background:"",layout:a.layout,"page-size":a.pagination.pageSize,"current-page":a.pagination.pageNum,"page-sizes":a.pageSizeList,total:a.pagination.total},on:{"current-change":a.handleCurrentChange,"size-change":a.handleSizeChange,"update:currentPage":function(t){return a.$set(a.pagination,"pageNum",t)},"update:current-page":function(t){return a.$set(a.pagination,"pageNum",t)}}}):a._e()],1)}),l=[],r={name:"page",components:{},props:{pagination:{type:Object,default:function(){return{pageSize:10,pageNum:1,total:0}}},pageSizeList:{type:Array,default:function(){return[10,20,30,50,100,500]}},layout:{type:String,default:"total,prev,pager,next,sizes,jumper"}},data:function(){return{}},computed:{},methods:{handleCurrentChange:function(a){this.pagination.pageNum=a,this.$emit("refresh",!0),this.backToTop()},handleSizeChange:function(a){this.pagination.pageSize=a,this.pagination.pageNum=1,this.$emit("refresh",!0),this.backToTop()},backToTop:function(){var a=this,t=window.pageYOffset,e=0;this.interval=setInterval((function(){var n=Math.floor(a.easeInOutQuad(10*e,t,-t,500));n<=0?(window.scrollTo(0,0),clearInterval(a.interval)):window.scrollTo(0,n),e++}),16)},easeInOutQuad:function(a,t,e,n){return(a/=n/2)<1?e/2*a*a+t:-e/2*(--a*(a-2)-1)+t}},mounted:function(){},created:function(){}},s=r,u=(e("9c09"),e("2877")),c=Object(u["a"])(s,o,l,!1,null,null,null),p=c.exports,m={name:"index",components:{page:p},props:{},data:function(){return{channeList:[{name:"中国之声",value:1},{name:"经济之声",value:2},{name:"中华之声",value:3},{name:"音乐之声",value:4},{name:"都市之声",value:5},{name:"神州之声",value:6},{name:"香港之声",value:7},{name:"民族之声",value:8},{name:"文艺之声",value:9},{name:"老年之声",value:10},{name:"高速广播",value:11},{name:"藏语广播",value:12},{name:"维语广播",value:13},{name:"娱乐广播",value:14},{name:"华夏之声",value:17},{name:"哈语广播",value:24}],formData:{channeName:9},optionsList:[],timeNow:0,dataList:[],audio:null,totalTime:0,playData:{},isPaused:!1,pagination:{pageSize:100,pageNum:1,total:0}}},computed:{},methods:{loadType:function(){var a=this;this.formData.name="",this.dataList=[],this.$jsonp("http://tacc.radio.cn/pcpages/liveSchedules",{channel_id:this.formData.channeName}).then((function(t){a.optionsList=t.data.program}))},loadData:function(a){var t=this;a||(this.pagination.pageNum=1),this.$jsonp("http://tacc.radio.cn/pcpages/searchs/livehistory",{channelname:this.formData.channeName,name:this.formData.name,start:this.pagination.pageNum,rows:this.pagination.pageSize}).then((function(a){console.log(a),t.dataList=a.passprogram,t.pagination.total=a.total}))},downLoad:function(a){this.downLoadFileReName("/audio2020"+a.stream_url1,a.name+"\t"+a.broadcast_date+".m4a")},downLoadFileReName:function(a,t){var e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType="blob",e.onload=function(){if(200===e.status){var a=e.response;if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,t);else{var n=document.createElement("a"),i=document.querySelector("body");n.href=window.URL.createObjectURL(a),n.download=t,n.style.display="none",i.appendChild(n),n.click(),i.removeChild(n),window.URL.revokeObjectURL(n.href)}}},e.send()},play:function(a){var t=this;this.playData=a,this.audio||(this.audio=new Audio,this.audio.addEventListener("timeupdate",(function(){if(t.totalTime=t.audio.duration,parseInt(t.timeNow)>=parseInt(t.totalTime)){var e=t.dataList.findIndex((function(t){return t.id=a.id}));t.play(t.dataList[e+1])}}))),this.audio.src="http://".concat(a.stream_domain1).concat(a.stream_url1),console.log(this.audio.src),this.audio.play(),clearInterval(this.time),this.time=setInterval((function(){t.timeNow=t.audio.currentTime}),10)},kuai:function(){this.audio.currentTime<this.totalTime&&(this.audio.currentTime+=10)},tui:function(){this.audio.currentTime>10?this.audio.currentTime-=10:this.audio.currentTime=0},curt:function(){this.isPaused=!this.isPaused,this.isPaused?this.audio.pause():this.audio.play()},changeTime:function(){this.audio.currentTime=this.timeNow}},filters:{formTime:function(a){return a<60?"".concat(a,"秒"):"".concat(parseInt(a/60),"分").concat(a%60,"秒")}},activated:function(){},mounted:function(){},created:function(){this.loadType()}},d=m,h=Object(u["a"])(d,n,i,!1,null,"66d8ce26",null);t["default"]=h.exports},"9c09":function(a,t,e){"use strict";e("f3c8")},f3c8:function(a,t,e){}}]);
//# sourceMappingURL=chunk-807a2aa4.1a9fd220.js.map