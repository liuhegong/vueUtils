(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c837eb00"],{"371d":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form"},[o("el-header",{staticClass:"mheader"},[o("div",{staticStyle:{float:"left","margin-left":"20px","font-size":"25px"}},[t._v("表单拖拽系统")]),o("div",{staticStyle:{"text-align":"right"}},[o("el-button",{on:{click:function(e){t.showDialog=!t.showDialog}}},[t._v(" 查看json数据")]),o("el-button",{on:{click:function(e){t.showSetJson=!t.showSetJson}}},[t._v(" 导入Json数据")]),o("el-button",{on:{click:t.exportVueFile}},[t._v(" 导出vue文件")]),o("el-button",{directives:[{name:"copy",rawName:"v-copy",value:t.copyFile,expression:"copyFile"}],on:{click:t.copyJson}},[t._v(" 复制代码")]),o("el-button",{on:{click:t.clearPage}},[t._v(" 清空页面")]),o("el-button",{on:{click:function(e){t.showVue=!t.showVue}}},[t._v(" 运行")])],1)]),o("div",{staticClass:"index"},[o("div",{staticClass:"left"},[o("el-scrollbar",[o("vuedraggable",{attrs:{sort:!1},on:{end:t.end}},[o("transition-group",t._l(t.buttonList,(function(e){return o("el-button",{key:e.name,staticStyle:{width:"70px"},attrs:{eType:e.eType,size:"mini"}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1),o("div",{ref:"efContainer",staticClass:"center"},[o("el-scrollbar",[o("m-form",{ref:"mForm",attrs:{canDraggable:!0,formData:t.formData,formCols:t.formCols,rules:t.rules},on:{formItemClick:t.formItemClick,formItemDbClick:t.formItemDbClick}})],1)],1),o("div",{staticClass:"right"},[o("m-form",{ref:"rightForm",attrs:{size:"mini",labelWidth:"120px",labelPosition:"right",formData:t.formSetData,formCols:t.formSetCols},on:{event:t.event},scopedSlots:t._u([{key:"options",fn:function(e){return[t._l(e.data.options,(function(s,n){return o("div",[o("el-row",[o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{placeholder:"label"},model:{value:s.label,callback:function(e){t.$set(s,"label",e)},expression:"item.label"}})],1),o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{placeholder:"value"},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1),o("el-col",{attrs:{span:2,offset:2}},[o("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.data.options.splice(n,1)}}})])],1)],1)})),o("el-button",{on:{click:function(t){return e.data.options.push({label:"",value:""})}}},[t._v("新增")])]}}])})],1)]),o("el-dialog",{attrs:{visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[o("el-button",{directives:[{name:"copy",rawName:"v-copy",value:JSON.stringify(t.formCols),expression:"JSON.stringify(formCols)"}],on:{click:t.copyJson}},[t._v(" 复制Json")]),o("el-button",{on:{click:t.exportJson}},[t._v(" 导出Json")]),o("json-view",{attrs:{deep:"5",data:{formCols:t.formCols,rules:t.rules,formData:t.formData}}})],1),o("el-dialog",{attrs:{visible:t.showVue,fullscreen:!0},on:{"update:visible":function(e){t.showVue=e}}},[o("el-card",[o("m-form",{attrs:{formData:t.formData,formCols:t.formCols,rules:t.rules}})],1)],1),o("el-dialog",{attrs:{visible:t.showSetJson},on:{"update:visible":function(e){t.showSetJson=e}}},[o("el-input",{attrs:{type:"textarea",rows:20},model:{value:t.jsonCols,callback:function(e){t.jsonCols=e},expression:"jsonCols"}}),o("el-button",{on:{click:t.setJsonOk}},[t._v(" 确定")])],1)],1)},n=[],i=(o("c740"),o("a434"),o("b76a")),a=o.n(i),l=o("a13e"),r=o("1b37"),c=o.n(r),u=o("d8e5"),f={name:"index",components:{vuedraggable:a.a,mForm:l["a"],jsonView:c.a},props:{},data:function(){return{buttonList:u["a"],jsonCols:"",showVue:!1,showDialog:!1,showSetJson:!1,draggableModel:{},formSetData:{},formSetCols:[],formData:{},formCols:[[]],rules:{},index:101}},computed:{copyFile:function(){return Object(u["e"])(this.formCols,this.rules,this.formData)}},methods:{clearPage:function(){var t=this;this.$confirm("是否要清空页面","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.formCols=[[]],t.formData={},t.rules={},t.formSetCols=[]}))},event:function(t){"isRule"===t.prop&&t.value?this.$set(this.rules,t.data.prop,{required:!0,message:t.data&&t.data.tipMessage?t.data.tipMessage:"值不能为空",trigger:"blur"}):"isRule"!==t.prop||t.value||(this.$refs.mForm.reset(),this.$set(this.rules,t.data.prop,{}),delete this.rules[t.data.prop])},copyJson:function(){this.$message({type:"success",message:"复制成功"})},exportJson:function(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({formCols:this.formCols,formData:this.formData,rules:this.rules},null,"\t")),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","data.json"),e.click(),e.remove(),this.$message.success("正在下载中,请稍后...")},exportVueFile:function(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(Object(u["e"])(this.formCols,this.rules,this.formData)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","form.vue"),e.click(),e.remove(),this.$message.success("正在下载中,请稍后...")},setJsonOk:function(){this.formCols=JSON.parse(this.jsonCols),this.showSetJson=!1},end:function(t){console.log(t);var e=t.item.attributes.eType.nodeValue,o=t.originalEvent.clientX,s=t.originalEvent.clientY,n=this.$refs.efContainer,i=n.getBoundingClientRect();o<i.x||o>i.width+i.x||s<i.y||i.y>i.y+i.height?this.$message.error("请把节点拖入到画布中"):this.setFormCols(e)},setFormCols:function(t){var e=this,o=JSON.parse(JSON.stringify(u["c"][t]));o.prop="prop".concat(this.index),this.index++,this.formSetCols=u["d"][o.mType||o.eType],this.formSetData=o;var s=this.formCols.length;this.formCols[s-1].push(o),this.$nextTick((function(){var t=e.$refs.efContainer;t.scrollTop=t.scrollHeight}))},formItemClick:function(t){this.formSetCols=u["d"][t.mType||t.eType],this.formSetData=t},formItemDbClick:function(t){var e=this;this.$confirm("是否要删除此项","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o=e.formCols.length,s=e.formCols[o-1].findIndex((function(e){return e==t}));e.formCols[o-1].splice(s,1)}))}}},m=f,p=(o("a2eb"),o("2877")),h=Object(p["a"])(m,s,n,!1,null,"5ce0967a",null);e["default"]=h.exports},a2eb:function(t,e,o){"use strict";o("fe74")},fe74:function(t,e,o){}}]);
//# sourceMappingURL=chunk-c837eb00.bdd50afb.js.map